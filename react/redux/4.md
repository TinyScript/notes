# ä¸€ç¯ï¼šæ‰‹æ‘¸æ‰‹æ•™å­¦å®ç°ä¸€ä¸ªreduxï¼ˆå››ï¼‰
replaceReducerè¿™éƒ¨åˆ†çš„å†…å®¹ä¸å¤šï¼Œä¸»è¦æ˜¯ä¸ºäº†å¤„ç†reduceræƒ³æ›¿æ¢çš„æ—¶å€™ç”¨ï¼Œæ¯”å¦‚ä½ ä¸€å¼€å§‹ç»™äº†ä¸€ä¸ªreducerï¼Œåæ¥åˆæƒ³å†å¤šåŠ ä¸€ä¸ªreducerï¼Œå°±å¯ä»¥ç”¨replaceçš„æ–¹æ³•å®ç°ã€‚

```javascript
import { createStore, combineReducers } from "./redux/index.js";
import counterReduer from "./reducers/counter.js";
import infoReduer from "./reducers/info.js";
const reducer = combineReducers({
  counter: counterReduer
});
// let store = createStore(reducer, initState);
let store = createStore(reducer);
const nextReducer = combineReducers({
  counter: counterReduer,
  info: infoReduer
});
store.replaceReducer(nextReducer);
console.log("å–å½“å‰çš„é»˜è®¤çŠ¶æ€", store.getState());
store.subscribe(() => {
  let state = store.getState();
  console.log("è·å–å½“å‰çš„çŠ¶æ€", state);
});
store.dispatch({
  type: "INCERMENT"
});
store.dispatch({
  type: "SET_NAME",
  name: "äº¬ç¨‹ä¸€ç¯ğŸ®"
});
```
- createStoreå¤šäº†replaceReducerçš„æ–¹æ³•ã€‚
- ä¸€å¼€å§‹ç»™storeå¡«å……äº†ä¸€ä¸ªcombineReducersï¼Œåç»­çš„storeéœ€è¦æ›´æ–°reducersæ—¶ï¼Œé€šè¿‡replaceReducerè¿›è¡Œæ›¿æ¢ï¼Œæ‰€ä»¥æ¥ä¸‹æ¥å°±çœ‹çœ‹createStoreå¹²äº†å•¥ã€‚

```javascript
export default function createStore(reducer, initState) {
  let state = initState;
  let listeners = [];
  function getState() {
    return state;
  }
  function subscribe(listener) {
    listeners.push(listener);
  }
  function dispatch(action) {
    state = reducer(state, action);
    //é€šçŸ¥
    for (const listener of listeners) {
      listener();
    }
  }
  function replaceReducer(nextReducer){
    reducer = nextReducer;
    dispatch({type:Symbol()});
  }
  //é»˜è®¤åˆæˆæ‰€æœ‰reducerçŠ¶æ€
  dispatch({type:Symbol()});
  return {
    replaceReducer,
    getState,
    subscribe,
    dispatch
  };
}
```
- å…¶å®æ²¡å•¥ï¼Œå°±å°†æ¥æ”¶åˆ°çš„nextReduceræ›¿æ¢æˆåŸæ¥çš„reducerï¼Œå¹¶æ´¾å‘ä¸€ä¸ªç©ºactionçš„dispatchï¼Œè¿›è¡Œstateæ ‘çš„é‡ç½®ã€‚

#### æ€»ç»“ï¼š
- æ–°å¢äº†replaceReduceræ–¹æ³•ï¼Œä¸»è¦æ˜¯ä¸ºäº†é’ˆå¯¹æƒ³è¦æ›´æ–°reduceræ—¶ä½¿ç”¨ã€‚